<div class="page-container">

  <h1>Smartphone-Verwaltung</h1>

  <!-- Registrierung -->
  <section class="card">
    <h2>Registrieren</h2>
    <form (ngSubmit)="register()" class="form-grid">
      <label>
        <span>Device ID</span>
        <input [(ngModel)]="regDeviceId" name="regDeviceId" required />
      </label>

      <label>
        <span>User Name</span>
        <input [(ngModel)]="regUserName" name="regUserName" required />
      </label>

      <label>
        <span>Secret Hash</span>
        <input [(ngModel)]="regSecretHash" name="regSecretHash" required />
      </label>

      <button type="submit" class="btn-primary">Registrieren</button>
    </form>
  </section>

  <!-- Authentifizierung -->
  <section class="card">
    <h2>Authentifizieren / Token anfordern</h2>
    <form (ngSubmit)="requestToken()" class="form-grid">
      <label>
        <span>Device ID</span>
        <input [(ngModel)]="authDeviceId" name="authDeviceId" required />
      </label>

      <label>
        <span>Secret Hash</span>
        <input [(ngModel)]="authSecretHash" name="authSecretHash" required />
      </label>

      <button type="submit" class="btn-secondary">Token anfordern</button>
    </form>

    <div *ngIf="authToken" class="token-box">
      <span>Auth Token:</span>
      <code>{{ authToken }}</code>
    </div>
  </section>

  <!-- Liste -->
  <section class="card">
    <h2>Registrierte Smartphones</h2>

    <div *ngIf="loading" class="info-text">Lade ...</div>
    <div *ngIf="errorMsg" class="error-text">{{ errorMsg }}</div>

    <table *ngIf="phones?.length" class="data-table">
      <thead>
      <tr>
        <th>ID</th>
        <th>Device ID</th>
        <th>User</th>
        <th>Status</th>
        <th>Last Seen</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let s of phones">
        <td>{{ s.id }}</td>
        <td>{{ s.deviceId }}</td>
        <td>{{ s.userName }}</td>
        <td>{{ s.status }}</td>
        <td>{{ s.lastSeen || '—' }}</td>
      </tr>
      </tbody>
    </table>

    <div *ngIf="!phones?.length && !loading" class="info-text">Keine Geräte vorhanden</div>
  </section>

</div>

